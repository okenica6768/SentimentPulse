
{
  "name": "assets",
  "options": {
    "validator": {
      "$jsonSchema": {
        "bsonType": "object",
        "required": ["symbol", "name", "type", "currentPrice", "sentimentScore"],
        "properties": {
          "symbol": {
            "bsonType": "string",
            "description": "Asset symbol (e.g., AAPL, BTC)"
          },
          "name": {
            "bsonType": "string",
            "description": "Full name of the asset"
          },
          "type": {
            "bsonType": "string",
            "enum": ["stock", "crypto"],
            "description": "Type of asset"
          },
          "currentPrice": {
            "bsonType": "number",
            "description": "Current market price"
          },
          "priceChange24h": {
            "bsonType": "number",
            "description": "24 hour price change percentage"
          },
          "volume24h": {
            "bsonType": "number",
            "description": "24 hour trading volume"
          },
          "marketCap": {
            "bsonType": "number",
            "description": "Market capitalization"
          },
          "sentimentScore": {
            "bsonType": "number",
            "description": "Current sentiment score (-1 to 1)"
          },
          "predictionGrowthProb": {
            "bsonType": "number",
            "description": "Probability of growth (0-100)"
          },
          "predictionDropProb": {
            "bsonType": "number",
            "description": "Probability of drop (0-100)"
          },
          "confidenceLevel": {
            "bsonType": "number",
            "description": "Confidence level (0-100)"
          },
          "newsArticles": {
            "bsonType": "array",
            "items": {
              "bsonType": "object",
              "properties": {
                "title": { "bsonType": "string" },
                "url": { "bsonType": "string" },
                "source": { "bsonType": "string" },
                "publishedAt": { 
                  "bsonType": "string",
                  "title": "datetime"
                },
                "sentiment": { "bsonType": "string" }
              },
              "additionalProperties": true
            }
          },
          "technicalIndicators": {
            "bsonType": "object",
            "properties": {
              "rsi": { "bsonType": "number" },
              "macd": { "bsonType": "number" },
              "sma20": { "bsonType": "number" },
              "sma50": { "bsonType": "number" },
              "bollinger": {
                "bsonType": "object",
                "properties": {
                  "upper": { "bsonType": "number" },
                  "middle": { "bsonType": "number" },
                  "lower": { "bsonType": "number" }
                },
                "additionalProperties": true
              }
            },
            "additionalProperties": true
          },
          "socialMetrics": {
            "bsonType": "object",
            "properties": {
              "twitterMentions": { "bsonType": "int" },
              "redditPosts": { "bsonType": "int" },
              "socialSentiment": { "bsonType": "number" }
            },
            "additionalProperties": true
          },
          "lastAnalyzed": {
            "bsonType": "string",
            "title": "datetime",
            "description": "ISO 8601 datetime string (UTC): YYYY-MM-DDTHH:mm:ss.sssZ"
          },
          "creator": {
            "bsonType": "string",
            "description": "Creator of the asset tracking"
          },
          "createdAt": {
            "bsonType": "string",
            "title": "datetime",
            "description": "ISO 8601 datetime string (UTC): YYYY-MM-DDTHH:mm:ss.sssZ"
          },
          "updatedAt": {
            "bsonType": "string",
            "title": "datetime",
            "description": "ISO 8601 datetime string (UTC): YYYY-MM-DDTHH:mm:ss.sssZ"
          }
        },
        "additionalProperties": true
      }
    },
    "validationLevel": "moderate",
    "validationAction": "warn"
  }
}
